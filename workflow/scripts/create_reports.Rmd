---
title: "`r paste0(analysis_type, ' - ', stringr::str_trunc(contrast, 25))`"
output:
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    theme: paper
---

```{r setup, include=FALSE, cache=FALSE}
# Set knitr options to allow duplicate labels (needed for the subpages)
options(knitr.duplicate.label = "allow")
scrolly_dt <- 800
```

```{r css, echo=FALSE, results='asis', eval = F}
# fix for datatable height in flexdashboard
cat(glue(.open = "<<", .close = ">>", "
<style>
.dataTables_scrollBody {
    height: <<scrolly_dt>>px !important;
    max-height: <<scrolly_dt>>px !important;
}
</style>
"))
```

# Overview

Column {.tabset .tabset-fade data-width=225}
-----------------------------------------------------------------------

```{r child = 'description.Rmd', eval = T}
```

Column {data-width=275}
-----------------------------------------------------------------------

```{r child = 'volcano.Rmd', eval = T}
```

<!-- conditional evaluation of graph based on whether it's set or contrast -->
```{r child = 'venn.Rmd', eval = set_overview}
```

Column {data-width=150}
-----------------------------------------------------------------------

```{r child = 'valuebox_info.Rmd', eval = T}
```

Column {data-width=350}
-----------------------------------------------------------------------

```{r child = 'gene_expr_table.Rmd', eval = T}
```

<!-- render subpages with pathway data -->
```{r include = F, eval = T}
out <- map_if(
  cp_data,
  is.not.empty.list,
  ~ create_subpage_markdown(.x),
  .else = ""
)
```

<!-- gives NULL at the end of html page -->
`r paste(knitr::knit_child(text = out), collapse = '')`
